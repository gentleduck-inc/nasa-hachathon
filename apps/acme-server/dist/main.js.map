{"version":3,"sources":["../src/main.ts"],"sourcesContent":["import { NestFactory } from '@nestjs/core'\nimport { NestExpressApplication } from '@nestjs/platform-express'\nimport { DocumentBuilder, SwaggerModule } from '@nestjs/swagger'\nimport { patchNestJsSwagger } from 'nestjs-zod'\nimport { createClient } from 'redis'\nimport { AppModule } from './app.module'\nimport { EventsAdapter } from './auth'\n\nasync function bootstrap() {\n  const app = await NestFactory.create<NestExpressApplication>(AppModule)\n\n  app.set('query parser', 'extended')\n  app.setGlobalPrefix('v1')\n  app.enableCors({\n    origin: ['http://localhost:3001', 'http://domain:3001'],\n    methods: 'GET,POST,PUT,PATCH,DELETE,OPTIONS',\n    allowedHeaders: 'Content-Type,Authorization',\n    credentials: true,\n    optionsSuccessStatus: 204,\n  })\n\n  const redisClient = createClient({\n    url: process.env.REDIS_URL,\n  })\n  await redisClient.connect()\n\n  app.useWebSocketAdapter(new EventsAdapter(app, redisClient as never))\n\n  // Swagger\n  patchNestJsSwagger()\n  const config = new DocumentBuilder()\n    .setTitle('Cats example')\n    .setDescription('The cats API description')\n    .setVersion('1.0')\n    .addTag('cats')\n    .build()\n  const documentFactory = () => SwaggerModule.createDocument(app, config)\n  SwaggerModule.setup('api', app, documentFactory)\n\n  await app.listen(process.env.PORT ?? 3000)\n}\n\nbootstrap()\n\n// what's an observable\n// what's db injections\n// what's the difference between middleware and interceptor\n"],"names":["bootstrap","app","NestFactory","create","AppModule","set","setGlobalPrefix","enableCors","origin","methods","allowedHeaders","credentials","optionsSuccessStatus","redisClient","createClient","url","process","env","REDIS_URL","connect","useWebSocketAdapter","EventsAdapter","patchNestJsSwagger","config","DocumentBuilder","setTitle","setDescription","setVersion","addTag","build","documentFactory","SwaggerModule","createDocument","setup","listen","PORT"],"mappings":";;;;sBAA4B;yBAEmB;2BACZ;uBACN;2BACH;sBACI;AAE9B,eAAeA;IACb,MAAMC,MAAM,MAAMC,iBAAW,CAACC,MAAM,CAAyBC,oBAAS;IAEtEH,IAAII,GAAG,CAAC,gBAAgB;IACxBJ,IAAIK,eAAe,CAAC;IACpBL,IAAIM,UAAU,CAAC;QACbC,QAAQ;YAAC;YAAyB;SAAqB;QACvDC,SAAS;QACTC,gBAAgB;QAChBC,aAAa;QACbC,sBAAsB;IACxB;IAEA,MAAMC,cAAcC,IAAAA,mBAAY,EAAC;QAC/BC,KAAKC,QAAQC,GAAG,CAACC,SAAS;IAC5B;IACA,MAAML,YAAYM,OAAO;IAEzBlB,IAAImB,mBAAmB,CAAC,IAAIC,mBAAa,CAACpB,KAAKY;IAE/C,UAAU;IACVS,IAAAA,6BAAkB;IAClB,MAAMC,SAAS,IAAIC,wBAAe,GAC/BC,QAAQ,CAAC,gBACTC,cAAc,CAAC,4BACfC,UAAU,CAAC,OACXC,MAAM,CAAC,QACPC,KAAK;IACR,MAAMC,kBAAkB,IAAMC,sBAAa,CAACC,cAAc,CAAC/B,KAAKsB;IAChEQ,sBAAa,CAACE,KAAK,CAAC,OAAOhC,KAAK6B;IAEhC,MAAM7B,IAAIiC,MAAM,CAAClB,QAAQC,GAAG,CAACkB,IAAI,IAAI;AACvC;AAEAnC,aAEA,uBAAuB;CACvB,uBAAuB;CACvB,2DAA2D"}