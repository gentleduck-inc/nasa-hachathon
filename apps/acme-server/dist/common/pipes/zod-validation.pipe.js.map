{"version":3,"sources":["../../../src/common/pipes/zod-validation.pipe.ts"],"sourcesContent":["import type { ArgumentMetadata, PipeTransform } from '@nestjs/common'\nimport type { ZodError, ZodSchema, z } from 'zod'\nimport { throwError } from '../libs'\n\n// NOTE: how pipes handles errors.\nexport class ZodValidationPipe implements PipeTransform {\n  constructor(private schema: ZodSchema) {}\n\n  transform(value: unknown, metadata: ArgumentMetadata): z.infer<typeof this.schema> {\n    try {\n      return this.schema.parse(value)\n    } catch (error) {\n      const { errors } = error as ZodError\n      console.log(error)\n      throwError(`${errors[0].message}`)\n    }\n  }\n}\n"],"names":["ZodValidationPipe","transform","value","metadata","schema","parse","error","errors","console","log","throwError","message"],"mappings":";;;;+BAKaA;;;eAAAA;;;sBAHc;AAGpB,IAAA,AAAMA,oBAAN,MAAMA;IAGXC,UAAUC,KAAc,EAAEC,QAA0B,EAA+B;QACjF,IAAI;YACF,OAAO,IAAI,CAACC,MAAM,CAACC,KAAK,CAACH;QAC3B,EAAE,OAAOI,OAAO;YACd,MAAM,EAAEC,MAAM,EAAE,GAAGD;YACnBE,QAAQC,GAAG,CAACH;YACZI,IAAAA,gBAAU,EAAC,GAAGH,MAAM,CAAC,EAAE,CAACI,OAAO,EAAE;QACnC;IACF;IAVA,YAAY,AAAQP,MAAiB,CAAE;aAAnBA,SAAAA;IAAoB;AAW1C"}