{"version":3,"sources":["../../../src/common/exceptions/error.exception.ts"],"sourcesContent":["import { ArgumentsHost, Catch, ExceptionFilter, WsExceptionFilter } from '@nestjs/common'\nimport { BaseWsExceptionFilter } from '@nestjs/websockets'\nimport { Response } from 'express'\nimport { Socket } from 'socket.io'\n\n@Catch()\nexport class ErrorExceptionFilter implements ExceptionFilter {\n  catch(exception: Error, host: ArgumentsHost) {\n    const ctx = host.switchToHttp()\n    const response = ctx.getResponse<Response>()\n\n    console.log('ðŸ”¥ Exception caught:', exception)\n\n    response.status(500).json({\n      state: 'error',\n      error: exception.message,\n    })\n  }\n}\n\n@Catch()\nexport class WSErrorExceptionFilter implements WsExceptionFilter {\n  catch(exception: Error, host: ArgumentsHost) {\n    const client: Socket = host.switchToWs().getClient<Socket>()\n\n    console.error('ðŸ”¥ WebSocket Error:', exception)\n\n    client.emit('error', {\n      status: 'error',\n      message: exception.message,\n    })\n  }\n}\n"],"names":["ErrorExceptionFilter","WSErrorExceptionFilter","catch","exception","host","ctx","switchToHttp","response","getResponse","console","log","status","json","state","error","message","client","switchToWs","getClient","emit"],"mappings":";;;;;;;;;;;QAMaA;eAAAA;;QAeAC;eAAAA;;;wBArB4D;;;;;;;AAMlE,IAAA,AAAMD,uBAAN,MAAMA;IACXE,MAAMC,SAAgB,EAAEC,IAAmB,EAAE;QAC3C,MAAMC,MAAMD,KAAKE,YAAY;QAC7B,MAAMC,WAAWF,IAAIG,WAAW;QAEhCC,QAAQC,GAAG,CAAC,wBAAwBP;QAEpCI,SAASI,MAAM,CAAC,KAAKC,IAAI,CAAC;YACxBC,OAAO;YACPC,OAAOX,UAAUY,OAAO;QAC1B;IACF;AACF;;;;AAGO,IAAA,AAAMd,yBAAN,MAAMA;IACXC,MAAMC,SAAgB,EAAEC,IAAmB,EAAE;QAC3C,MAAMY,SAAiBZ,KAAKa,UAAU,GAAGC,SAAS;QAElDT,QAAQK,KAAK,CAAC,uBAAuBX;QAErCa,OAAOG,IAAI,CAAC,SAAS;YACnBR,QAAQ;YACRI,SAASZ,UAAUY,OAAO;QAC5B;IACF;AACF"}