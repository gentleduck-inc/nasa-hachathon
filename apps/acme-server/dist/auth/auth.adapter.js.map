{"version":3,"sources":["../../src/auth/auth.adapter.ts"],"sourcesContent":["import { NestExpressApplication } from '@nestjs/platform-express'\nimport { IoAdapter } from '@nestjs/platform-socket.io'\nimport { RedisStore } from 'connect-redis'\nimport session from 'express-session'\nimport sharedsession from 'express-socket.io-session'\nimport { RedisClientType } from 'redis'\nimport type { Server } from 'socket.io'\n\n/**\n * Enable session tokens for web sockets by using express-socket.io-session\n */\nexport class EventsAdapter extends IoAdapter {\n  constructor(private readonly session: any) {\n    super()\n  }\n\n  createIOServer(port: number, options?: any): any {\n    const server: Server = super.createIOServer(port, options)\n\n    server.use(\n      //@ts-expect-error\n      sharedsession(this.session, {}),\n    )\n    return server\n  }\n}\n"],"names":["EventsAdapter","IoAdapter","createIOServer","port","options","server","use","sharedsession","session"],"mappings":";;;;+BAWaA;;;eAAAA;;;kCAVa;+EAGA;;;;;;AAOnB,IAAA,AAAMA,gBAAN,MAAMA,sBAAsBC,2BAAS;IAK1CC,eAAeC,IAAY,EAAEC,OAAa,EAAO;QAC/C,MAAMC,SAAiB,KAAK,CAACH,eAAeC,MAAMC;QAElDC,OAAOC,GAAG,CACR,kBAAkB;QAClBC,IAAAA,+BAAa,EAAC,IAAI,CAACC,OAAO,EAAE,CAAC;QAE/B,OAAOH;IACT;IAZA,YAAY,AAAiBG,OAAY,CAAE;QACzC,KAAK,SADsBA,UAAAA;IAE7B;AAWF"}